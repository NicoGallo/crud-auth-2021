(this["webpackJsonpauth-project"]=this["webpackJsonpauth-project"]||[]).push([[0],{38:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(32),s=n.n(r),o=(n(38),n(7)),i=n(15),l=n(5),u=n(24);n(51),n(40);u.a.initializeApp({apiKey:"AIzaSyC2Sbx8oBJIbKKJZf4JhSHFxPKaxJsrH4g",authDomain:"project-auth-crud-2021.firebaseapp.com",projectId:"project-auth-crud-2021",storageBucket:"project-auth-crud-2021.appspot.com",messagingSenderId:"62539735620",appId:"1:62539735620:web:0f23f0c2cf287dd036d211"});var b=u.a.firestore(),d=u.a.auth(),j=n(1),m=Object(l.f)((function(e){return Object(j.jsxs)("div",{className:"navbar navbar-dark bg-dark",children:[Object(j.jsx)(i.b,{className:"navbar-brand",to:"/",children:"ListApp"}),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)(i.c,{className:"btn btn-dark mr-2",to:"/",exact:!0,children:"Inicio"}),null!==e.firebaseUser?Object(j.jsx)(i.c,{className:"btn btn-dark mr-2",to:"/admin",children:"Admin"}):null,null!==e.firebaseUser?Object(j.jsx)("button",{className:"btn btn-dark",onClick:function(){d.signOut().then((function(){e.history.push("/login")}))},children:"Cerrar Sesion"}):Object(j.jsx)(i.c,{className:"btn btn-dark mr-2",to:"/login",children:"Login"})]})})]})})),h=n(9),p=n.n(h),O=n(16),f=Object(l.f)((function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],m=Object(a.useState)(null),h=Object(o.a)(m,2),f=h[0],x=h[1],g=Object(a.useState)(!1),v=Object(o.a)(g,2),k=v[0],N=v[1],y=Object(a.useCallback)(Object(O.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.signInWithEmailAndPassword(c,l);case 3:n=t.sent,console.log(n.user),r(""),u(""),x(null),e.history.push("/admin"),t.next=18;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),"auth/invalid-email"===t.t0.code&&x("Email no valido"),"auth/email-already-in-use"===t.t0.code&&x("Email ya utilizado"),"auth/user-not-found"===t.t0.code&&x("Email no registrado"),"auth/wrong-password"===t.t0.code&&x("Password incorrecto");case 18:case"end":return t.stop()}}),t,null,[[0,11]])}))),[c,l,e.history]),w=Object(a.useCallback)(Object(O.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.createUserWithEmailAndPassword(c,l);case 3:return n=t.sent,t.next=6,b.collection("users").doc(n.user.email).set({email:n.user.email,uid:n.user.uid});case 6:return t.next=8,b.collection(n.user.uid).add({name:"Tarea de ejemplo",fecha:Date.now()});case 8:r(""),u(""),x(null),e.history.push("/admin"),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(0),console.log("error"),"auth/invalid-email"===t.t0.code&&x("Email no valido"),"auth/email-already-in-use"===t.t0.code&&x("Email ya utilizado");case 19:case"end":return t.stop()}}),t,null,[[0,14]])}))),[c,l,e.history]);return Object(j.jsxs)("div",{className:"mt-5",children:[Object(j.jsx)("h3",{className:"text-center",children:k?"Registro":"Login"}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"row justify-content-center",children:Object(j.jsx)("div",{className:"col-12 col-sm-8 col-md-6 col-xl-4",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c.trim()?l.trim()?l.length<6?x("Ingrese password mayor a 6 caracteres"):(x(null),k?w():y()):x("Ingrese Password"):x("Ingrese Email")},children:[f&&Object(j.jsx)("div",{className:"alert alert-danger",children:f}),Object(j.jsx)("input",{type:"email",className:"form-control mb-2",placeholder:"Ingrese Email",onChange:function(e){return r(e.target.value)},value:c}),Object(j.jsx)("input",{type:"password",className:"form-control mb-2",placeholder:"Ingrese Contrase\xf1a",onChange:function(e){return u(e.target.value)},value:l}),Object(j.jsx)("button",{className:"btn btn-lg btn-dark btn-block",type:"submit",children:k?"Registrarse":"Acceder"}),Object(j.jsx)("button",{className:"btn btn-sm btn-info btn-block",type:"button",onClick:function(){return N(!k)},children:k?"\xbfYa estas registrado?":"\xbfNo tenes una cuenta?"}),k?null:Object(j.jsx)("button",{className:"btn btn-lg btn-danger btn-sm mt-2 btn-block",type:"button",onClick:function(){return e.history.push("/reset")},children:"Recuperar Contrase\xf1a"})]})})})]})})),x=n(25),g=n(21),v=n(28),k=n.n(v);n(49);var N=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(!1),m=Object(o.a)(d,2),h=m[0],f=m[1],v=Object(a.useState)(""),N=Object(o.a)(v,2),y=N[0],w=N[1],S=Object(a.useState)(null),C=Object(o.a)(S,2),E=C[0],I=C[1],A=Object(a.useState)(!1),D=Object(o.a)(A,2),L=D[0],R=D[1];Object(a.useEffect)((function(){(function(){var t=Object(O.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R(!0),t.next=4,b.collection(e.user.uid).limit(2).orderBy("date").get();case 4:return n=t.sent,console.log(n.docs),a=n.docs.map((function(e){return Object(g.a)({id:e.id},e.data())})),I(n.docs[n.docs.length-1]),console.log(a),r(a),t.next=12,b.collection(e.user.uid).limit(2).orderBy("date").startAfter(n.docs[n.docs.length-1]).get();case 12:t.sent.empty?(console.log("No hay mas tareas"),R(!0)):R(!1),console.log(n.docs),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}})()()}),[e.user.uid]);var B=function(){var t=Object(O.a)(p.a.mark((function t(n){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),l.trim()){t.next=4;break}return console.log("esta vacio"),t.abrupt("return");case 4:return t.prev=4,a={name:l,date:Date.now()},t.next=8,b.collection(e.user.uid).add(a);case 8:s=t.sent,r([].concat(Object(x.a)(c),[Object(g.a)(Object(g.a)({},a),{},{id:s.id})])),u(""),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(O.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.collection(e.user.uid).doc(n).delete();case 3:a=c.filter((function(e){return e.id!==n})),r(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(O.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),l.trim()){t.next=4;break}return console.log("vacio"),t.abrupt("return");case 4:return t.prev=4,t.next=7,b.collection(e.user.uid).doc(y).update({name:l});case 7:a=c.map((function(e){return e.id===y?{id:e.id,date:e.date,name:l}:e})),r(a),f(!1),u(""),w(""),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=Object(O.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.collection(e.user.uid).limit(2).orderBy("date").startAfter(E).get();case 3:n=t.sent,console.log(n.docs),a=n.docs.map((function(e){return Object(g.a)({id:e.id},e.data())})),r([].concat(Object(x.a)(c),Object(x.a)(a))),I(n.docs[n.docs.length-1]),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"container mb-2",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("h3",{children:"Lista de Tareas"}),Object(j.jsx)("ul",{className:"list-group",children:c.map((function(e){return Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsxs)("span",{children:[e.name," - ",k()(e.fecha).format("LLL")]}),Object(j.jsx)("button",{className:"btn btn-danger btn-sm float-right",onClick:function(){return J(e.id)},children:"Eliminar"}),Object(j.jsx)("button",{className:"btn btn-warning btn-sm float-right mr-2",onClick:function(){return function(e){f(!0),u(e.name),w(e.id)}(e)},children:"Editar"})]},e.id)}))}),Object(j.jsx)("button",{className:"btn btn-info btn-block mt-2 btn-sm",onClick:function(){return U()},disabled:L,children:"Siguiente"})]}),Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("h3",{children:h?"Editar Tarea":"Agregar Tarea"}),Object(j.jsxs)("form",{onSubmit:h?P:B,children:[Object(j.jsx)("input",{type:"text",className:"form-control mb-2",placeholder:"Ingrese Tarea",value:l,onChange:function(e){return u(e.target.value)}}),Object(j.jsx)("button",{type:"submit",className:h?"btn btn-warning btn-block btn-sm":"btn btn-dark btn-block btn-sm",children:h?"Editar":"Agregar"})]})]})]})})},y=Object(l.f)((function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){d.currentUser?(console.log("Existe un usuario"),r(d.currentUser)):(console.log("No existe el usuario"),e.history.push("/login"))}),[e.history,c]),Object(j.jsxs)("div",{className:"mt-5",children:[Object(j.jsx)("h3",{className:"text-center",children:"Ruta protegida"}),c&&Object(j.jsx)(N,{user:c})]})})),w=Object(l.f)((function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),l=i[0],u=i[1],b=Object(a.useCallback)(Object(O.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.sendPasswordResetEmail(c);case 3:console.log("correo enviado"),e.history.push("login"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),u(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),[c,e.history]);return Object(j.jsxs)("div",{className:"mt-5",children:[Object(j.jsx)("h3",{className:"text-center",children:"Reiniciar Contrase\xf1a"}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"row justify-content-center",children:Object(j.jsx)("div",{className:"col-12 col-sm-8 col-md-6 col-xl-4",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c.trim()?(u(null),b()):u("Ingrese Email")},children:[l&&Object(j.jsx)("div",{className:"alert alert-danger",children:l}),Object(j.jsx)("input",{type:"email",className:"form-control mb-2",placeholder:"Ingrese Email",onChange:function(e){return r(e.target.value)},value:c}),Object(j.jsx)("button",{className:"btn btn-lg btn-dark btn-block",type:"submit",children:"Reiniciar Contrase\xf1a"})]})})})]})}));var S=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){d.onAuthStateChanged((function(e){console.log(e),c(e||null)}))}),[]),!1!==n?Object(j.jsx)(i.a,{children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(m,{firebaseUser:n}),Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/login",children:Object(j.jsx)(f,{})}),Object(j.jsx)(l.a,{path:"/admin",children:Object(j.jsx)(y,{})}),Object(j.jsx)(l.a,{path:"/reset",exact:!0,children:Object(j.jsx)(w,{})}),Object(j.jsx)(l.a,{path:"/",exact:!0,children:Object(j.jsx)("h1",{className:"text-center",children:"Hola! Hace loguin y crea tu lista de tareas "})})]})]})}):Object(j.jsx)("p",{children:"Cargando..."})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(S,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.43a66772.chunk.js.map